{% extends 'base.html.twig' %}

{% block title %}Protokoll Ausgabe - {{ geraet }}{% endblock %}

{% block body %}
    <form method="get" target="./">
        <input type="submit" name="format"
               class="button" value="html" />

        <input type="submit" name="format"
               class="button" value="md" label="markdown" />
    </form>

    {% if jobId is defined %}
        <div id="progress_bar" style="position: relative; width: 100%; height: 22px; background: #eee; border-radius: 6px; overflow: hidden; margin: 10px 0 20px 0;">
            <div class="fill" style="height: 100%; width: 0%; background: #4caf50;"></div>
            <span class="label" style="position: absolute; left: 50%; top: 0; transform: translateX(-50%); font-size: 12px; line-height: 22px; color: #000;">0%</span>
        </div>
        <div id="progress_msg" class="text-muted" style="margin-bottom: 10px;">Wird verarbeitetâ€¦</div>
    {% endif %}

    <div class="output-wrapper" id="protocol_output">
        {{ output|raw }}
    </div>

    {% if jobId is defined %}
        {# CSP-safe: external module will read these data attributes #}
        <div id="job-root"
             data-job-id="{{ jobId }}"
             data-status-url="{{ path('process_status', {id: jobId}) }}"
             data-output-url="{{ path('process_output', {id: jobId}) }}"
             hidden></div>
    {% endif %}
{% endblock %}
